{% extends "::base.html.twig" %}

{% block title %}{{'lugar.buscar.titulo'|trans({'%buscar%' : buscar})}} | {{parent()}}{% endblock %}

{% block javascripts %}
	<script src="{{asset('assets/js/jquery.raty.min.js')}}"></script>
	<script>
		$(document).ready(function(){
			$('.resultado-busqueda-raty').each(function(){
				var estrellas = $(this).attr('data-stars');
				$(this).raty({
					width: 140,
				    starOff:  WEBROOT+'../assets/images/extras/estrella_vacia_recomendacion.png',
				    starOn:   WEBROOT+'../assets/images/extras/estrella_llena_recomendacion.png',
				    starHalf:   WEBROOT+'../assets/images/extras/estrella_media_recomendacion.png',
				    half: true,
				    start: estrellas,
				    readOnly: true,
				    space: false
				});
			});
		});
	</script>
{% endblock %}

{% block content %}
	{% for lugar in lugares %}
		<div class="resultado-busqueda">
			<div class="datos-principales">
				<ul>
					<li>{{lugar.nombre}}</li>
					<li>
						<span><strong>Categorías</strong></span>
						{% for categoria in lugar.categorias_nombre %}
							{{categoria|raw}}{% if loop.last == null %}, {% endif %}
						{% endfor %}
					</li>
					<li>
						<span><strong>Categorías</strong></span>
						{{lugar.sector_nombre|raw}}
					</li>
				</ul>
			</div>
			<div class="datos-secundarios">
				<ul>
					<li><div data-stars="{{lugar.estrellas}}" class="resultado-busqueda-raty"></div></li>
					<li>{{lugar.total_recomendaciones}} {{'lugar.buscar.total_recomendaciones'|transchoice(lugar.total_recomendaciones)}}</li>
					<li>{{lugar.calle}} {{lugar.numero}}</li>
					<li>{{lugar.precio}}</li>
					<li>Ranking: {{lugar.ranking}}</li>
				</ul>
			</div>
		</div>
	{% endfor %}
{% endblock %}